<?xml version="1.0" encoding="UTF-8" ?>

<JuPedSim project="offenbach" version="0.8" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../../xsd/jps_ini_core.xsd">

<!-- header: seed, geometry, output format -->
<seed>3011</seed>
<max_sim_time>120</max_sim_time>
<!--maxCPU>1</maxCPU-->


<geometry>smoke_sensor_geometry.xml</geometry>

<!-- traectories file and format -->
<trajectories format="xml-plain" fps="20">
<file location="smoke_sensor_traj.xml" />
</trajectories>
<logfile>log.txt</logfile>
<!-- configuration of fire simulation input -->
<JPSfire>
	<A_smoke_sensor smoke_factor_grids="../FDS/3_sfgrids/" update_time="20" final_time="20" />
 	<B_walking_speed/>
 	<C_toxicity_analysis/>
</JPSfire>

<!-- agents -->
<agents operational_model_id="3">
	<agents_distribution>
		<group group_id="1" agent_parameter_id="1" room_id="0" subroom_id="0" x_min="2" y_min="0" y_max="5" number="30" router_id="7" pre_movement_mean="20" pre_movement_sigma="0" risk_tolerance_mean="0." risk_tolerance_sigma="0.3"/>
		
	</agents_distribution>
</agents>

<!-- operational models -->
<operational_models>

	<model operational_model_id="3" description="Tordeux2015">
		<model_parameters>
			<solver>euler</solver>
			<stepsize>0.1</stepsize>
	<periodic>0</periodic>
			<exit_crossing_strategy>1</exit_crossing_strategy>
			<linkedcells enabled="true" cell_size="30"/>
			<force_ped  a="5" D="0.1"/>
			<force_wall a="5" D="0.02"/>
		</model_parameters>
		<agent_parameters agent_parameter_id="1">
			<v0 mu="1.34" sigma="0.0" />
			<bmax mu="0.15" sigma="0.0" /> <!-- this is l/2, assuming peds are circles with constant radius-->
			<bmin mu="0.15" sigma="0.0" />
			<amin mu="0.15" sigma="0.0" />
			<tau mu="0.5" sigma="0.0" />
			<atau mu="0." sigma="0.0" />
			<T mu="1" sigma="0.0" />
		</agent_parameters>
	</model>

</operational_models>

<!-- route choice models -->
  <route_choice_models>

    <router router_id="7" description="AI">
      <sensors>
	      <sensor sensor_id="2" description="Smoke" status="activated"/>
	      <sensor sensor_id="3" description="LastDestination" status="activated"/>
      </sensors>
      <cognitive_map status="complete" />
      <parameters>
        <!-- <navigation_lines file="A_smoke_sensor_ini_routing.xml" /> -->
      </parameters>
    </router>

  </route_choice_models>

</JuPedSim>
